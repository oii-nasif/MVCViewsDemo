@{
    ViewData["Title"] = "TempData Demo - Second Page";
}

<div class="container">
    <h1 class="mb-4">@ViewData["Title"]</h1>

    <div class="alert alert-info">
        <h5 class="alert-heading">How you got here:</h5>
        <p class="mb-0">You were redirected from <strong>FirstPage</strong> action, and TempData was used to pass data across the redirect.</p>
    </div>

    <div class="row">
        <div class="col-md-8">
            <div class="card mb-4">
                <div class="card-header bg-warning">
                    <h5 class="mb-0">TempData Values</h5>
                </div>
                <div class="card-body">
                    @if (TempData["Message"] != null)
                    {
                        <div class="alert alert-success">
                            <strong>Message from FirstPage:</strong><br />
                            @TempData["Message"]
                        </div>
                    }
                    else
                    {
                        <div class="alert alert-warning">
                            <strong>No TempData Message!</strong><br />
                            TempData has been consumed. Refresh this page to see it disappear.
                        </div>
                    }

                    @if (TempData["Timestamp"] != null)
                    {
                        <p><strong>Timestamp:</strong> @TempData["Timestamp"]</p>
                    }
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-header bg-secondary text-white">
                    <h5 class="mb-0">About TempData</h5>
                </div>
                <div class="card-body">
                    <ul>
                        <li>TempData is stored in session or cookies (configurable)</li>
                        <li>Data persists across redirects (one additional request)</li>
                        <li>Data is automatically deleted after being read</li>
                        <li>Use <code>TempData.Keep("key")</code> to preserve for another request</li>
                        <li>Use <code>TempData.Peek("key")</code> to read without marking for deletion</li>
                    </ul>

                    <h6 class="mt-3">Common Use Cases:</h6>
                    <ul>
                        <li>Passing success/error messages after form submission</li>
                        <li>Preserving data across Post-Redirect-Get (PRG) pattern</li>
                        <li>One-time notifications to users</li>
                    </ul>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">Code Example</h5>
                </div>
                <div class="card-body">
                    <pre class="bg-light p-3 rounded"><code>// In FirstPage action (Controller)
public IActionResult FirstPage()
{
    TempData["Message"] = "This message survives a redirect!";
    TempData["Timestamp"] = DateTime.Now.ToString();
    return RedirectToAction("SecondPage");
}

// In SecondPage view
@@if (TempData["Message"] != null)
{
    &lt;div class="alert alert-success"&gt;
        @@TempData["Message"]
    &lt;/div&gt;
}</code></pre>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card bg-light">
                <div class="card-body">
                    <h5>Try It Out</h5>
                    <p class="text-muted small">Click the button below to go back to FirstPage and see TempData being set again.</p>
                    <a asp-action="FirstPage" class="btn btn-warning w-100 mb-2">
                        Restart TempData Demo
                    </a>
                    <a asp-action="Index" class="btn btn-outline-secondary w-100">
                        Back to ViewData/ViewBag
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
